(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,a){e.exports=a(150)},110:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a.n(l),s=a(9),c=a(10),o=a(7),u=a(12),h=a(11),m=(a(109),a(110),a(19)),d=a(14),p=a(35),g=a(155),E=a(156),b=a(157),v=a(165),f=a(89),k=a(158);function C(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.authdata?{Authorization:"Basic "+e.authdata}:{}}var y={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("http://localhost:4000/login",a).then(O).then((function(a){return a&&(a.authdata=window.btoa(e+":"+t),localStorage.setItem("user",JSON.stringify(a))),a}))},logout:S,getAll:function(){var e={method:"GET",headers:C()};return fetch("/users",e).then(O)}};function S(){localStorage.removeItem("user")}function O(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){401===e.status&&(S(),window.location.reload(!0));var n=a&&a.message||e.statusText;return Promise.reject(n)}return a}))}var j=a(22),A=a.n(j),w={username:null,password:null},M={authenticate:function(e,t){return new Promise((function(a,n){A.a.post("http://34.227.195.251/login",{},{auth:{username:e,password:t}}).then((function(n){(w={username:e,password:t}).authdata=window.btoa(e+":"+t),localStorage.setItem("user",JSON.stringify(w)),a()})).catch((function(e){console.log(e),n()}))}))},getAxiosAuth:function(){return{auth:localStorage.getItem("user")}},isAuth:function(){return!!localStorage.getItem("user")},logout:function(){localStorage.removeItem("user"),window.location.reload(!0)},baseAddress:"http://34.227.195.251"},_=M,P=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",submitted:!1,loading:!1,error:""},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var a=this.state,n=a.username,r=a.password;n&&r&&(this.setState({loading:!0}),_.authenticate(n,r).then((function(e){console.log(e),t.props.loginSuccess(),t.props.history.push(t.props.redirectPathOnSuccess)})).catch((function(){t.props.loginFail()})))}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.submitted,l=e.loading,i=e.error;return r.a.createElement(g.a,{fluid:!0,className:"m-5"},r.a.createElement(E.a,null,r.a.createElement(b.a,{variant:"info"},"Hello! Please, type in your info!",r.a.createElement("br",null),"Login: admin",r.a.createElement("br",null),"Password: 123456"),r.a.createElement("h2",null,"Login"),r.a.createElement(v.a,{noValidate:!0,validated:n,onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,{controlId:"formBasicLogin"},r.a.createElement(v.a.Label,null,"Login"),r.a.createElement(v.a.Control,{type:"text",name:"username",value:t,placeholder:"Enter login",required:!0,onChange:this.handleChange}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please type in login")),r.a.createElement(v.a.Group,{controlId:"formBasicPassword"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",value:a,placeholder:"Password",required:!0,onChange:this.handleChange}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please type in password")),r.a.createElement(f.a,{variant:"primary",disabled:l,type:"submit"},l&&r.a.createElement(k.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Login"),i&&r.a.createElement(b.a,{variant:"danger"},i))))}}]),a}(r.a.Component),T=a(102);function N(e){var t,a=e.isAuthenticated,n=Object(T.a)(e,["isAuthenticated"]);return t=a?r.a.createElement(d.b,n):r.a.createElement(d.a,{to:"/login"}),r.a.createElement(r.a.Fragment,null,t)}var L=a(169),I=a(62),q=a.n(I),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.getMapCenterData()}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,null,r.a.createElement("div",{className:q.a.searchResult},this.props.search.map((function(t){return r.a.createElement(L.a.Item,{key:t.uid},t.adress,",",t.title,",",r.a.createElement("a",{onClick:e.handleClick,href:"/?lat="+t.latitude+"&lng="+t.longitude},"Lat: ",t.latitude,", Ltd: ",t.longitude))}))))}}]),a}(n.Component),U=a(88),R=a(29),B=a(91),W=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={data:[],search:[],value:"",active:!1},n.handleFormClick=n.handleFormClick.bind(Object(o.a)(n)),n.getSearchChargers=n.getSearchChargers.bind(Object(o.a)(n)),n.closeSearch=n.closeSearch.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getSearchChargers",value:function(e){var t=this;this.setState({value:e.target.value,active:!0},(function(){A.a.post(_.baseAddress+"/chargers-search",{search:t.state.value}).then((function(e){t.setState({search:e.data})})).catch((function(e){console.log(e)}))}))}},{key:"handleFormClick",value:function(){this.setState((function(e){return{data:[],active:!1}}))}},{key:"closeSearch",value:function(){this.setState((function(e){return{active:!1,value:""}}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.active&&r.a.createElement(x,{getMapCenterData:this.props.getMapCenterData,search:this.state.search}),r.a.createElement(v.a,{inline:!0},r.a.createElement(U.a,{type:"text",placeholder:"Search",value:this.state.value,className:Object(R.a)(q.a.search,"mr-sm-2"),onChange:this.getSearchChargers,onClick:this.handleFormClick}),r.a.createElement(f.a,{onClick:this.closeSearch,variant:"outline-success"},r.a.createElement(B.BsXCircle,null))))}}]),a}(n.Component),D=a(70),F=a.n(D),V=a(92),H=a.n(V),Y=a(167);var z=function(){return r.a.createElement("a",null,r.a.createElement("a",{href:"/",className:F.a.logoWrap},r.a.createElement("img",{className:F.a.logo,src:H.a}),r.a.createElement(Y.a.Brand,{className:F.a.title},"ChargingX")))},X=a(166),J=a(159),K=a(57),G=a(43),Q=a.n(G);function Z(e){return e.auth?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.data.username),r.a.createElement(X.a,{title:r.a.createElement(K.b,{className:Q.a.icon}),id:"nav-dropdown"},r.a.createElement(X.a.ItemText,null,r.a.createElement(m.b,{to:"/profile"},"Profile")),r.a.createElement(X.a.ItemText,null,r.a.createElement(m.b,{to:"/purchases"},"Purchases")),r.a.createElement(X.a.Divider,null),r.a.createElement(X.a.Item,{onClick:e.handle},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null),r.a.createElement(X.a,{title:r.a.createElement(K.b,{className:Q.a.icon}),id:"nav-dropdown"},r.a.createElement(X.a.Item,{href:"/login"},"Login")))}var $=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(o.a)(n)),n.logoutClick=n.logoutClick.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.handle()}},{key:"logoutClick",value:function(){_.logout()}},{key:"render",value:function(){return r.a.createElement(Y.a,{className:Q.a.headerWrap},this.props.isToggled?r.a.createElement(K.c,{className:Q.a.menu,onClick:this.handleClick}):r.a.createElement(K.a,{className:Q.a.menu,onClick:this.handleClick}),r.a.createElement(z,null),r.a.createElement(W,{getMapCenterData:this.props.getMapCenterData}),r.a.createElement(Y.a.Collapse,{id:"basic-navbar-nav",className:Object(R.a)(Q.a.navBar,"justify-content-end")},r.a.createElement(J.a,null,r.a.createElement(Z,{handle:this.logoutClick,auth:_.isAuth(),data:JSON.parse(_.getAxiosAuth().auth)}))))}}]),a}(n.Component),ee=a(34),te=a.n(ee),ae=a(76),ne=a(56),re=a(95),le=a(94);ne.b.add(re.a);function ie(e){return e.isToggled?Object(R.a)(te.a.item,te.a.activeLink):Object(R.a)(te.a.item)}function se(e){return"spa"==e.page.render?r.a.createElement(m.b,{to:e.page.path},r.a.createElement(ae.a,{icon:e.page.icon,className:te.a.icon}),r.a.createElement("p",null,e.page.name)):"ssa"==e.page.render?r.a.createElement(J.a.Link,{href:e.page.path},r.a.createElement(ae.a,{icon:e.page.icon,className:te.a.icon}),r.a.createElement("p",null,e.page.name)):void 0}var ce=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={activePath:n.props.location.pathname,search:n.props.location.search},n}return Object(c.a)(a,[{key:"render",value:function(){var e,t=this;return r.a.createElement(J.a,{defaultActiveKey:"/",className:(e=this.props,e.isToggled?Object(R.a)(te.a.sidebar,te.a.toggled):Object(R.a)(te.a.sidebar))},le.map((function(e){return!(t.props.isAuthenticated&&"Login"==e.name)&&r.a.createElement(J.a.Item,{className:ie(t.props),key:e.key},r.a.createElement(se,{page:e}))})))}}]),a}(n.Component),oe=Object(d.h)(ce),ue=a(58),he=a(164),me=a(160),de=a(170),pe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleMapClick=n.handleMapClick.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.state={time_amount:10},n}return Object(c.a)(a,[{key:"handleMapClick",value:function(){this.props.handleMapClick()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"handleStartClick",value:function(e,t){var a={id:e.id,time_amount:t,startTime:Math.floor((new Date).getTime()/1e3),endTime:""};this.props.start(a)}},{key:"handleStopClick",value:function(e){var t={id:e.id,time_amount:this.props.purchase.time_amount,startTime:this.props.purchase.time_amount,endTime:Math.floor((new Date).getTime()/1e3)};this.props.stop(t)}},{key:"render",value:function(){var e=this;return r.a.createElement(he.a,{show:this.props.isClicked,onHide:this.handleMapClick,centered:!0},r.a.createElement(he.a.Header,{closeButton:!0},r.a.createElement(he.a.Title,null,this.props.data.title),r.a.createElement(me.a,{variant:this.props.active&&this.props.data.id===this.props.purchase.id?"success":"info"},this.props.active&&this.props.data.id===this.props.purchase.id?"Charging":"Ready")),r.a.createElement(he.a.Body,null,r.a.createElement(L.a,{variant:"flush"},r.a.createElement(L.a.Item,null,"UID: ",r.a.createElement("b",null,this.props.data.uid)),r.a.createElement(L.a.Item,null,"Adress: ",r.a.createElement("b",null,this.props.data.adress)),r.a.createElement(L.a.Item,null,"Type: ",r.a.createElement("b",null,this.props.data.type)),r.a.createElement(L.a.Item,null,"Socket: ",r.a.createElement("b",null,this.props.data.socket)),r.a.createElement(L.a.Item,null,"Power: ",r.a.createElement("b",null,this.props.data.power)),r.a.createElement(L.a.Item,null,"Price: ",r.a.createElement("b",null,this.props.data.price)))),this.props.data.id===this.props.purchase.id&&this.props.active&&r.a.createElement(de.a,{animated:!0,now:100,label:"Charging"}),this.props.isAuthenticated&&r.a.createElement(he.a.Footer,{className:"justify-content-center"},.2==this.props.data.price&&r.a.createElement(v.a,null,r.a.createElement(v.a.Control,{type:"number",name:"amount",value:this.state.time_amount,onChange:this.handleChange,placeholder:"Enter amount"})),r.a.createElement(f.a,{variant:"primary",onClick:function(){return e.handleStartClick(e.props.data,e.state.time_amount)}},"Start"),r.a.createElement(f.a,{variant:"danger",onClick:function(){return e.handleStopClick(e.props.data)}},"Stop")))}}]),a}(n.Component),ge=a(97),Ee=a.n(ge),be=a(98),ve=a.n(be),fe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onMapClicked=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n.state={isClicked:!1,showingInfoWindow:!1,activeMarker:{},selectedPlace:{},chargers:[],activeCharger:[]},n.handleMapClick=n.handleMapClick.bind(Object(o.a)(n)),n.onMarkerClick=n.onMarkerClick.bind(Object(o.a)(n)),n.onMouseoverMarker=n.onMouseoverMarker.bind(Object(o.a)(n)),n.onMouseoutMarker=n.onMouseoutMarker.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleMapClick",value:function(){this.setState((function(e){return{isClicked:!e.isClicked}}))}},{key:"onMarkerClick",value:function(e,t,a){this.handleMapClick(),this.setState({activeCharger:e.charger})}},{key:"onMouseoverMarker",value:function(e,t,a){this.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})}},{key:"onMouseoutMarker",value:function(e,t,a){this.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(pe,{isAuthenticated:this.props.isAuthenticated,data:this.state.activeCharger,purchase:this.props.purchase,active:this.props.active,isClicked:this.state.isClicked,handleMapClick:this.handleMapClick,start:this.props.start,stop:this.props.stop}),r.a.createElement(ue.Map,{google:this.props.google,zoom:this.props.map.zoom,onClick:this.onMapClicked,initialCenter:{lat:this.props.map.lat,lng:this.props.map.lng},className:Ee.a.map},this.props.chargers.map((function(t){return r.a.createElement(ue.Marker,{charger:t,position:{lat:t.latitude,lng:t.longitude},onClick:e.onMarkerClick,key:t.id,icon:{url:ve.a,anchor:new e.props.google.maps.Point(32,32),scaledSize:new e.props.google.maps.Size(50,50)}})})),r.a.createElement(ue.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",null,r.a.createElement("h1",null,this.state.selectedPlace.name)))))}}]),a}(n.Component),ke=Object(ue.GoogleApiWrapper)({apiKey:"AIzaSyAmE0JB8YaxRry0zgD5VFQF9e1VqDGbJVE"})(fe),Ce=a(161),ye=a(171),Se=a(162),Oe=a(77),je=a.n(Oe),Ae=a(168),we=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={show:!1},n.handleClick=n.handleClick.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.errorHandler()}},{key:"render",value:function(){return r.a.createElement(Ae.a,{show:this.props.error.status,onClick:this.handleClick},r.a.createElement(Ae.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"Error!"),r.a.createElement("small",null)),r.a.createElement(Ae.a.Body,null,this.props.error.body.toString()))}}]),a}(n.Component);r.a.Component;var Me=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={chargers:[],time_amount:10,bam:0},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"handleStartClick",value:function(e,t){var a={id:e.id,time_amount:t,startTime:Math.floor((new Date).getTime()/1e3),endTime:""};this.props.start(a)}},{key:"handleStopClick",value:function(e){var t={id:e.id,time_amount:this.props.purchase.time_amount,startTime:this.props.purchase.time_amount,endTime:Math.floor((new Date).getTime()/1e3)};this.props.stop(t)}},{key:"blockCards",value:function(){if(this.props.active)return je.a.blocked}},{key:"showActiveCard",value:function(e){if(e===this.props.purchase.id)return je.a.notBlocked}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{fluid:!0},r.a.createElement(we,{error:this.props.error,errorHandler:this.props.errorHandler}),r.a.createElement("h1",{className:"mt-4 mb-4"},"Car chargers"),r.a.createElement(Ce.a,null,this.props.chargers.map((function(t){return r.a.createElement(ye.a,{className:Object(R.a)("col-md-3",e.showActiveCard(t.id),e.blockCards()),key:t.id},r.a.createElement(ye.a.Body,null,r.a.createElement(me.a,{className:"mb-2",variant:e.props.active&&t.id===e.props.purchase.id?"success":"info"},e.props.active&&t.id===e.props.purchase.id?"Charging":"Ready"),r.a.createElement(ye.a.Title,null,r.a.createElement("b",null,t.title)),r.a.createElement(ye.a.Subtitle,{className:"mb-2 text-muted"},r.a.createElement("i",null,t.adress)),r.a.createElement(ye.a.Text,null,r.a.createElement("b",null,"UID:")," ",t.uid),r.a.createElement(ye.a.Text,null,r.a.createElement("b",null,"Socket:")," ",t.socket),r.a.createElement(ye.a.Text,null,r.a.createElement("b",null,"Type:")," ",t.type),r.a.createElement(ye.a.Text,null,r.a.createElement("b",null,"Price:")," ",0==t.price?"free":t.price),r.a.createElement(ye.a.Text,null,r.a.createElement("b",null,"Power:")," ",t.power),t.id===e.props.purchase.id&&e.props.active&&r.a.createElement(de.a,{className:"mt-3",animated:!0,now:100,label:"Charging"}),.2==t.price&&r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(v.a.Label,null,r.a.createElement("i",null,"Number of minutes:")),r.a.createElement(v.a.Control,{type:"number",name:"time_amount",min:"0",defaultValue:10,onChange:e.handleChange,placeholder:"Minutes"}))),e.props.isAuthenticated&&r.a.createElement(Se.a,{"aria-label":"Basic example",className:"d-flex mt-3 justify-content-center"},r.a.createElement(f.a,{variant:"primary",onClick:function(){return e.handleStartClick(t,e.state.time_amount)}},"Start"),r.a.createElement(f.a,{variant:"danger",onClick:function(){return e.handleStopClick(t)}},"Stop"))))}))))}}]),a}(n.Component),_e=a(163),Pe=a(99),Te=a.n(Pe),Ne=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getPurchases()}},{key:"payClick",value:function(e){A.a.post(_.baseAddress+"/pay",{id:e},this.props.getAuth()).then((function(e){})).catch((function(e){console.log(e)})),this.props.getPurchases()}},{key:"getDate",value:function(e){return null===e||0===e||""===e?"No date":new Date(1e3*e).toLocaleTimeString()}},{key:"render",value:function(){var e=this;return r.a.createElement(E.a,{fluid:!0},r.a.createElement("h1",{className:"mt-4 mb-4"},"Purchases"),r.a.createElement(_e.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"UID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Address"),r.a.createElement("th",null,"Time start"),r.a.createElement("th",null,"Time end"),r.a.createElement("th",null,"Charge Amount"),r.a.createElement("th",null,"Total Amount"),r.a.createElement("th",null,"Payed"),r.a.createElement("th",null,"Active"))),r.a.createElement("tbody",null,this.props.purchases.map((function(t){return r.a.createElement("tr",{key:t.uid+t.date_start},r.a.createElement("td",null,t.uid),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.adress),r.a.createElement("td",null,e.getDate(1*t.date_start)),r.a.createElement("td",null,e.getDate(1*t.date_end)),r.a.createElement("td",null,t.power," KW"),r.a.createElement("td",null,null===t.total_amount||1*t.total_amount===0?1*t.active===1?"Counting":"Free":t.total_amount+"\u20ac"),r.a.createElement("td",null,1*t.payed===0?r.a.createElement(me.a,{variant:"warning"},"Not payed"):r.a.createElement(me.a,{variant:"success"},"Payed"),null===t.total_amount||1*t.total_amount===0?r.a.createElement("div",null):1*t.payed===0?r.a.createElement(f.a,{onClick:function(){return e.payClick(t.id)},className:Te.a.pay},"Pay"):r.a.createElement("div",null)),r.a.createElement("td",null,1*t.active===0?r.a.createElement(me.a,{variant:"warning"},"Finished"):r.a.createElement(me.a,{variant:"success"},"Active")))})))))}}]),a}(n.Component),Le=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(s.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getUser()}},{key:"render",value:function(){return r.a.createElement(E.a,{fluid:!0},r.a.createElement("h1",{className:"mt-4 mb-4"},"Profile"),r.a.createElement(L.a,null,r.a.createElement(L.a.Item,null,r.a.createElement("b",null,"Name"),": ",this.props.user.name),r.a.createElement(L.a.Item,null,r.a.createElement("b",null,"Email:")," ",this.props.user.email),r.a.createElement(L.a.Item,null,r.a.createElement("b",null,"Money:")," ",this.props.user.money)))}}]),a}(n.Component),Ie=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user:{username:"",email:"",password:""},submitted:!1,loading:!1,error:""},n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(p.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({submitted:!0});var a=this.state,n=a.username,r=a.email,l=a.password;n&&r&&l&&(this.setState({loading:!0}),y.register(n,r,l).then((function(e){var a=(t.props.location.state||{from:{pathname:"/"}}).from;t.props.history.push(a)}),(function(e){return t.setState({error:e,loading:!1})})))}},{key:"render",value:function(){var e=this.state,t=(e.username,e.password,e.submitted),a=e.loading,n=e.error;return r.a.createElement(g.a,{fluid:!0,className:"m-5"},r.a.createElement(E.a,null,r.a.createElement(b.a,{variant:"info"},"Hello! Please, type in your info!"),r.a.createElement("h2",null,"Register"),r.a.createElement(v.a,{noValidate:!0,validated:t,onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,{controlId:"formBasicName"},r.a.createElement(v.a.Label,null,"Name"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter name",required:!0,onChange:this.handleChange}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please type in name")),r.a.createElement(v.a.Group,{controlId:"formBasicEmail"},r.a.createElement(v.a.Label,null,"Email address"),r.a.createElement(v.a.Control,{type:"Email",placeholder:"Enter email",required:!0,onChange:this.handleChange}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please type in email")),r.a.createElement(v.a.Group,{controlId:"formBasicPassword"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Password",required:!0,onChange:this.handleChange}),r.a.createElement(v.a.Control.Feedback,{type:"invalid"},"Please type in password")),r.a.createElement(f.a,{variant:"primary",disabled:a,type:"submit"},a&&r.a.createElement(k.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Register"),n&&r.a.createElement(b.a,{variant:"danger"},n),r.a.createElement("div",null,r.a.createElement(m.b,{to:"/login"},"Already registered? Login")))))}}]),a}(r.a.Component),qe=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onLogin=function(){n.setState({isAuthenticated:_.isAuth()})},n.onLoginFail=function(){n.setState({isAuthenticated:!1})},n.startCharging=function(e){n.setState({purchase:e},(function(){A.a.post(_.baseAddress+"/start-charge",n.state.purchase,n.getAuth()).then((function(e){n.setState({activePurchase:!0})})).catch((function(e){n.setState({activePurchase:!1}),n.setState({error:{status:!0,body:e}})}))}))},n.stopCharging=function(e){n.setState({purchase:e},(function(){A.a.post(_.baseAddress+"/stop-charge",n.state.purchase,n.getAuth()).then((function(e){n.setState({activePurchase:!1})})).catch((function(e){n.setState({error:{status:!0,body:e}})}))}))},n.state={user:{},isAuthenticated:_.isAuth(),isToggled:!1,chargers:[],purchase:{id:"",time_amount:"",startTime:"",endTime:""},activePurchase:!1,error:{status:!1,body:{}},user_purchases:[],map:{zoom:8,lat:65.059274,lng:25.455584}},n.handleSideBarToggled=n.handleSideBarToggled.bind(Object(o.a)(n)),n.errorHandler=n.errorHandler.bind(Object(o.a)(n)),n.getPurchases=n.getPurchases.bind(Object(o.a)(n)),n.getUser=n.getUser.bind(Object(o.a)(n)),n.getMapCenterData=n.getMapCenterData.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getAuth",value:function(){var e={};return JSON.parse(_.getAxiosAuth().auth)&&(e={auth:{password:JSON.parse(_.getAxiosAuth().auth).password,username:JSON.parse(_.getAxiosAuth().auth).username}}),e}},{key:"handleSideBarToggled",value:function(){this.setState((function(e){return{isToggled:!e.isToggled}}))}},{key:"errorHandler",value:function(){this.setState({error:{status:!1,body:{}}})}},{key:"getChargers",value:function(){var e=this;A.a.get(_.baseAddress+"/chargers").then((function(t){e.setState({chargers:t.data})}))}},{key:"getUser",value:function(){var e=this;A.a.get(_.baseAddress+"/user",this.getAuth()).then((function(t){e.setState({user:t.data[0]})}))}},{key:"getPurchases",value:function(){var e=this;A.a.get(_.baseAddress+"/purchases-protected",this.getAuth()).then((function(t){e.setState({user_purchases:t.data})}))}},{key:"getActiveChargers",value:function(){var e=this;A.a.get(_.baseAddress+"/active-chargers",this.getAuth()).then((function(t){t.data.length>0&&(e.setState({purchase:{id:t.data[0].charger_id,time_amount:e.state.purchase.time_amount,startTime:t.data[0].date_start,endTime:e.state.purchase.endTime}}),e.setState({activePurchase:!0}))}))}},{key:"getMapCenterData",value:function(){var e=new URL(window.location.href),t=e.searchParams.get("lat"),a=e.searchParams.get("lng");t&&a&&this.setState({map:{zoom:15,lat:t,lng:a}})}},{key:"componentDidMount",value:function(){this.getChargers(),this.getPurchases(),this.getActiveChargers(),this.getUser(),this.getMapCenterData()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement($,{isToggled:this.state.isToggled,getMapCenterData:this.getMapCenterData,handle:this.handleSideBarToggled}),r.a.createElement("div",{id:"page-content"},r.a.createElement(oe,{isAuthenticated:this.state.isAuthenticated,isToggled:this.state.isToggled}),r.a.createElement(d.d,null,r.a.createElement("div",{className:"Mainpanelwrap"},r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(ke,{isAuthenticated:this.state.isAuthenticated,purchase:this.state.purchase,active:this.state.activePurchase,start:this.startCharging,stop:this.stopCharging,chargers:this.state.chargers,map:this.state.map})),r.a.createElement(d.b,{path:"/chargers"},r.a.createElement(Me,{isAuthenticated:this.state.isAuthenticated,error:this.state.error,errorHandler:this.errorHandler,purchase:this.state.purchase,active:this.state.activePurchase,start:this.startCharging,stop:this.stopCharging,chargers:this.state.chargers})),r.a.createElement(d.b,{path:"/login",component:function(t){return r.a.createElement(P,Object.assign({isAuthenticated:e.state.isAuthenticated,loginSuccess:e.onLogin,loginFail:e.onLoginFail,userInfo:e.state.userInfo,redirectPathOnSuccess:"/profile"},t))}}),r.a.createElement(d.b,{path:"/signup"},r.a.createElement(Ie,null)),r.a.createElement(N,{isAuthenticated:this.state.isAuthenticated,path:"/purchases",exact:!0},r.a.createElement(Ne,{getPurchases:this.getPurchases,purchases:this.state.user_purchases,getAuth:this.getAuth})),r.a.createElement(N,{isAuthenticated:this.state.isAuthenticated,path:"/profile",exact:!0},r.a.createElement(Le,{getUser:this.getUser,user:this.state.user}))))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(qe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){e.exports={item:"Sidebar_item__2O0mD",activeLink:"Sidebar_activeLink__2zkSR",sidebar:"Sidebar_sidebar___9CD2",icon:"Sidebar_icon__30gM_",toggled:"Sidebar_toggled__2cg3C"}},43:function(e,t,a){e.exports={icon:"Header_icon__3YaZz",menu:"Header_menu__2Vfg5",headerWrap:"Header_headerWrap__2ba_s",navBar:"Header_navBar__1yeoc"}},62:function(e,t,a){e.exports={search:"Search_search__11uzj",searchResult:"Search_searchResult__3F4gI"}},70:function(e,t,a){e.exports={logo:"Logo_logo__1GkVY",title:"Logo_title__1P5gx",logoWrap:"Logo_logoWrap__3n6JA"}},77:function(e,t,a){e.exports={blocked:"ChargersPanel_blocked__30T2c",notBlocked:"ChargersPanel_notBlocked__2V3Nh"}},92:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACqCAAAAAAYHYteAAAEsklEQVR42u2bPZatIAzHLandgQugdgeW7sOVsBGX4R5YgZUNdUoaXvVGDAIBv+adl8w5t5mr9yeB5B+IjftnrGFURmVURmVURmVURmVURmVURmVURmVURmVURmVURmVURmVURmXU/xp11VnbbPRqg7+7fxWO/1hXuIqqepmzSccuBtUdTe2oc991Xdftd1kvj+oomoyJ2K/YuTt+s98fSg9N03i37ubLo+qWIYfatOr8ZzS61MMx03EE2slcX1Z2llnWbj6brhhH7Dip8b4QAYLbnrEuJxMVXzf84Fjd42e9J1iBarOs4ajYpY8O/YbHW9mb4ir25NnSGvHSwjiNN6Hxsw/bbSlgHfNLazr+nE3g6C4/faqzFXbm2XQ9hoEEjkEPLhTciEpaWn4YSOAE4z2ut2oAO49Z86YAKLRuxm1fbjhOLe5WVGchb4k0tfyMuEbpr6W4/zllhXG8eWyw+6fNfYhqphalqS063lK7D1FTOCuSBWK2X6LirOnh2AmFjQnch6iA88W0k85tTBbcjmoJRQGKUweR2lMU2T2ooIY+Zx1ZpWRF6qVR1Xmh3cREKqiu1v1Vc3XpylA9nKXe/XXLai5i9TTzFsiCAtIqVIrQPlMpWBY0g3EPo7ptorPuKiWYOd3iHke1hHo7xMHqnKhSLqYASxDaOfcLkki9nq0sLQz4OIEsWOwrqM7NlOnqaeZw86KQtB7VqnxRMMb3UsRk3FuoDsyW+TMG6vdSPttfxSqlLXb/W6iANy8mcL8T1c7isvtfQl3k1dX/FirObUIZ9wGq0YSiAFWvo3YfoILq84aShaxy/2XUuW1KTShwH6BqWUzajMZ9gGqmctJOuw9QrSp3f6vsB6hk0Uo54HoWdZ1EMWq/2A9Qocr94D5ALd0OqBOpd6BuQ/nq77X7ADWo6SWlKLBfoGL3y3nN2yXS2uL6ak3/Hmqw1T+u7neinpz0uF+Kimv6C9nyYdTgGPtSuHx2f7WNnvQAIQ7Ae6irjJ70wEQoCmqja1PhfpwtoUwVdm8VLBhHeP0oRFVYKa9KUW2ipqeqQjHqN/YBEjV9gSqsEtiFqJDoj1hkgRq0T6OG7t+nnRkLhGs7P40aHJArb7mVFa7lYaApcz8+edj75gqLAlEeBpoi9wcnD1FZ8EAYKEENTh7i/ShCDhnzDwpuRw37UdaoKqQUBeaxUc12zT6tCumoif4Ic8dW/32oQRenp1ISqvAD1ACnX6NblzXx/UZULaMNCaEqNF+iwhRvm0y0I1kAAJP8gJtRLd5LSagUf6tfj1LKXiY/yBmW1hYe4OxZcU21TUK2zUX4iucG1AQOpLtmDUHDUhuYKKigonspJ6owU4jX72Q3Ve7fo222HYmgY4gtbKR3WOJdnMFyM9kHzfeTV6OGXZx72+RCSFOE10oESWg3efe3ZJVy/m5P0Ah4YvKO9wIS7TFhP8oWyR+EMLBeRk20x0CiSR1LHUK9vV1EtXr0dpuO76ut6NR6iE+4w13ObchO19yogvlrm9nMtnnS3ZqjgaXcJmpwS7b6HcaojMqojMqojMqojMqojMqojMqojMqojMqojMqojMqojMqojMqojMqojMqodPsDR27T2JpQafAAAAAASUVORK5CYII="},94:function(e){e.exports=JSON.parse('[{"path":"/","name":"Home","icon":"home","css":"","key":1,"render":"spa"},{"path":"/chargers","name":"Test","icon":"charging-station","css":"","key":2,"render":"spa"},{"path":"/login","name":"Login","icon":"user","css":"","key":3,"render":"spa"}]')},97:function(e,t,a){e.exports={map:"MainPanel_map__dLFad",mappp:"MainPanel_mappp__7th48"}},98:function(e,t,a){e.exports=a.p+"static/media/petrol-station.f9d4dc0a.svg"},99:function(e,t,a){e.exports={pay:"PurchasePanel_pay__3FYnX"}}},[[104,1,2]]]);
//# sourceMappingURL=main.fdea5b28.chunk.js.map